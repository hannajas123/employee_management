<!DOCTYPE html>
<html lang="en"> <head>
     <meta charset="UTF-8"> 
     <title>Change Password</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
       <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
     </head> <body class="bg-light">
         <nav class="navbar navbar-dark bg-dark mb-4"> <div class="container">
             <a class="navbar-brand" href="/form-builder/">Employee System</a> 
                     

             <div class="navbar-nav ms-auto"> <a class="nav-link" href="/employees/">Employees</a>
 <a class="nav-link" href="/form-builder/">Form Builder</a>
                 <a class="nav-link" href="/profile/">Profile</a> 
                 <a class="nav-link" href="#" onclick="logout()">Logout</a> </div>
                 </div> </nav> <div class="container py-5"> 
                    <h2 class="text-center text-primary mb-4">🔒 Change Password</h2>
                    <div class="card shadow p-4 mx-auto" style="max-width: 500px;">
  <div class="mb-3">
    <label class="form-label">Old Password</label>
    <input type="password" id="old-password" class="form-control" placeholder="Enter old password">
  </div>
  <div class="mb-3">
    <label class="form-label">New Password</label>
    <input type="password" id="new-password" class="form-control" placeholder="Enter new password">
  </div>
  <button class="btn btn-primary w-100" onclick="changePassword()">🔄 Change Password</button>
  <div id="response" class="alert d-none mt-3"></div>
</div>
</div> <script> const token = localStorage.getItem("access");
 async function changePassword() { const oldPass = document.getElementById("old-password").value;
  const newPass = document.getElementById("new-password").value;
   const resBox = document.getElementById("response");
    if (!oldPass || !newPass) { showMessage("Please fill in both fields", "warning"); 
    return; } try { const res = await axios.post("/api/auth/change-password/", 
    { old_password: oldPass, new_password: newPass }, 
    { headers: { Authorization: `Bearer ${token}`, "Content-Type": "application/json" } });
     showMessage("✅ Password changed successfully!", "success");
      document.getElementById("old-password").value = ""; 
      document.getElementById("new-password").value = ""; } 
      catch (err) { const msg = err.response?.data?.detail || "Error changing password"; 
      showMessage("❌ " + msg, "danger"); } } function showMessage(message, type) 
      { const res = document.getElementById("response"); 
      res.className = `alert alert-${type}`; 
      res.innerText = message;
       res.classList.remove("d-none"); setTimeout(() => res.classList.add("d-none"), 4000); } 
       function logout() { localStorage.removeItem("access");
        localStorage.removeItem("refresh"); alert("Logged out."); 
        window.location.href = "/login/"; }
 </script> </body> </html>